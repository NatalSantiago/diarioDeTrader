<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>DiÃ¡rio de Trader</title>
    <!-- CSS externo -->
    <link rel="stylesheet" href="style.css">
    <!-- Bibliotecas externas -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="dashboard" id="app">
        <!-- top bar tema + configuraÃ§Ãµes + backups + dashboard (agrupados) -->
        <div class="top-bar">
            <div class="logo"><h1>â—‰ DIÃRIO DE TRADER</h1></div>
            <div style="display: flex; gap: 0.8rem; align-items: center; flex-wrap: wrap;">
                <button class="dashboard-btn" id="dashboardButton">ğŸ“Š Dashboard</button>
                <button class="config-btn" id="configButton">âš™ï¸ Configurar Metas</button>
                <button class="backup-btn" id="fazerBackup">ğŸ’¾ Backup</button>
                <button class="backup-btn" id="restaurarBackup">ğŸ“‚ Restaurar</button>
                <input type="file" id="arquivoBackup" accept=".enc" style="display: none;">
                <div class="theme-toggle" id="themeToggle">
                    <button class="theme-btn active" data-theme="dark">DARK</button>
                    <button class="theme-btn" data-theme="light">LIGHT</button>
                </div>
            </div>
        </div>

        <!-- BotÃ£o LanÃ§ar Trade -->
        <div style="display: flex; justify-content: flex-end;">
            <button class="launch-btn" id="lancarTradeBtn">ğŸš€ LanÃ§ar Trade</button>
        </div>

        <!-- cards mÃ©tricas da conta -->
        <div class="metric-grid">
            <div class="card"><div class="card-label">ğŸ’° Saldo inicial</div><div class="card-value" id="saldoInicial">R$ 10.000</div></div>
            <div class="card" id="metaCard">
                <div class="card-label">
                    ğŸ¯ Meta <span id="metaPercentLabel">10%</span>
                    <span id="metaStatusText">(falta)</span>
                </div>
                <div class="card-value" id="metaFalta">R$ 1.000</div>
                <div class="progress-meta" id="progressMeta">â¬†ï¸ Faltam 10%</div>
            </div>
            <div class="card"><div class="card-label">ğŸ“‰ Drawdown MÃ¡x <span id="ddMaxLabel">7%</span></div><div class="card-value" id="ddMax">0%</div><div class="badge" id="ddMaxStatus">seguro</div></div>
            <div class="card"><div class="card-label">âœ… Positivos</div><div class="card-value" id="totalPos">0</div></div>
            <div class="card"><div class="card-label">âŒ Negativos</div><div class="card-value" id="totalNeg">0</div></div>
        </div>

        <!-- divisor + mÃ©tricas diÃ¡rias -->
        <div class="divider"></div>
        <div style="display: flex; flex-wrap: wrap; gap: 1.2rem; align-items: baseline; margin-bottom: 1rem;">
            <span class="badge" style="font-size: 1rem;">ğŸ“… trades hoje: <strong id="tradesHoje">0</strong></span>
            <span class="badge" id="dailyDrawdownBadge" style="background: var(--danger-bg);">ğŸ“‰ Drawdown diÃ¡rio: <strong id="ddDiario">0%</strong> / <span id="ddDiarioLimite">2%</span></span>
            <span class="badge" style="background: var(--success-bg);">ğŸ“ˆ Positivos hoje: <strong id="posHoje">0</strong></span>
            <span class="badge" style="background: var(--danger-bg);">ğŸ“‰ Negativos hoje: <strong id="negHoje">0</strong></span>
            <span class="badge" style="background: var(--surface);">ğŸ’° Saldo atual: <strong id="saldoAtual">R$ 10.000</strong></span>
        </div>

        <!-- FILTROS AVANÃ‡ADOS -->
        <div class="filter-bar">
            <div class="filter-item">
                <label>PerÃ­odo:</label>
                <select id="filtroPeriodo">
                    <option value="hoje">Hoje</option>
                    <option value="semana">Esta semana</option>
                    <option value="mes">Este mÃªs</option>
                    <option value="periodo">Personalizado</option>
                    <option value="todos">Todos</option>
                </select>
            </div>
            <div class="filter-item" id="dataInicioGroup" style="display: none;">
                <label>De:</label>
                <input type="date" id="dataInicio">
            </div>
            <div class="filter-item" id="dataFimGroup" style="display: none;">
                <label>AtÃ©:</label>
                <input type="date" id="dataFim">
            </div>
            <div class="filter-item">
                <label>Status:</label>
                <select id="filtroStatus">
                    <option value="todos">Todos</option>
                    <option value="abertos">Abertos</option>
                    <option value="fechados">Fechados</option>
                    <option value="positivos">Positivos</option>
                    <option value="negativos">Negativos</option>
                </select>
            </div>
            <button class="btn-outline" id="aplicarFiltro">Aplicar</button>
            <button class="btn-print" id="imprimirLista">ğŸ–¨ï¸ Imprimir</button>
        </div>

        <!-- Lista de trades com filtro -->
        <div style="margin: 1.5rem 0 0.5rem; display: flex; justify-content: space-between; align-items: center;">
            <span class="section-title" style="font-size: 1.2rem;">ğŸ“‹ Trades <span id="filtroDescricao">(todos)</span></span>
        </div>
        <div class="trades-list" id="tradesList"></div>

        <!-- Template oculto para impressÃ£o (nÃ£o usado mais, mantido por compatibilidade) -->
        <div id="print-template" style="display: none;"></div>
    </div>

    <!-- JavaScript externo -->
    <script src="script.js"></script>
</body>
</html>